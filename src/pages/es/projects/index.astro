---
import BaseLayout from '../../../layouts/BaseLayout.astro';
import Navigation from '../../../components/react/Navigation.tsx';
import LanguageSwitcher from '../../../components/LanguageSwitcher.astro';
import { getCollection } from 'astro:content';

const projects = (await getCollection('projects')).sort((a, b) => a.data.order - b.data.order);

// Map technology names to vocabulary page slugs
const techSlugMap: Record<string, string> = {
  'React': 'react-typescript',
  'TypeScript': 'react-typescript',
  'Redux': 'redux-state-management',
  'Zustand': 'zustand-state-management',
  'Material UI': 'material-ui-design-system',
  'MongoDB': 'mongodb-react-dashboard',
  'Docker': 'docker-github-actions-cicd',
  'Playwright': 'playwright-testing',
  'Next.js': 'nextjs-enterprise',
  'React Hook Form': 'react-hook-form',
  'Formik': 'formik-multistep-forms',
  'PostgreSQL': 'postgresql-react',
  'GraphQL': 'graphql-integration',
  'Gatsby': 'gatsby-graphql'
};
---

<style>
  .keyword-highlight {
    background: linear-gradient(180deg, transparent 60%, rgba(var(--accent-rgb), 0.2) 60%);
    font-weight: 500;
    text-decoration: none;
    color: inherit;
    transition: background 0.2s;
  }
  .keyword-highlight:hover {
    background: linear-gradient(180deg, transparent 50%, rgba(var(--accent-rgb), 0.35) 50%);
  }
</style>

<BaseLayout
  title="Proyectos | Portales y Aplicaciones React Empresariales"
  description="Portafolio de aplicaciones React empresariales y portales internos construidos para O2 Czech Republic, TESCO Stores CZ, MONETA Auto, České dráhy y JABLOTRON GROUP."
>
  <Navigation slot="navigation" client:load currentPath={Astro.url.pathname} />
  <LanguageSwitcher slot="language-switcher" />

  <article class="mx-auto max-w-5xl space-y-8">
    <nav aria-label="Breadcrumb" class="text-sm text-slate-400">
      <a href="/es" class="hover:text-accent">Inicio</a> → <span class="text-slate-200">Proyectos</span>
    </nav>

    <header class="space-y-4">
      <h1 class="text-4xl font-bold text-white sm:text-5xl">Proyectos empresariales</h1>
      <p class="text-xl text-slate-200">
        Una muestra de portales internos y aplicaciones empresariales con mucho React, construidos para grandes corporaciones checas durante la última década.
      </p>
    </header>

    <div class="rounded-2xl border border-accent/30 bg-accent/10 p-6">
      <p class="text-lg text-slate-100">
        Cada proyecto representa meses de trabajo de desarrollo, sirviendo a cientos o miles de usuarios diarios. He construido estas aplicaciones usando React, TypeScript y tecnologías empresariales modernas, manteniendo altos estándares de rendimiento, accesibilidad y calidad de código.
      </p>
    </div>

    <div class="grid gap-6 md:grid-cols-2">
      {projects.map((project) => (
        <article class="grid-panel flex flex-col gap-4">
          <div>
            <p class="text-sm uppercase tracking-[0.25em] text-slate-400">{project.data.role}</p>
            <h3 class="mt-2 text-2xl font-semibold text-white">{project.data.title}</h3>
            <p class="mt-2 text-slate-200">{project.data.summary}</p>
          </div>
          <div class="flex flex-wrap gap-2">
            {project.data.stack.map((tech) => {
              const slug = techSlugMap[tech];
              return slug ? (
                <a href={`/es/vocabulary/${slug}`} class="pill keyword-highlight">{tech}</a>
              ) : (
                <span class="pill">{tech}</span>
              );
            })}
          </div>
          {project.data.link && (
            <a class="text-sm font-semibold text-accent underline-offset-4 hover:underline" href={project.data.link}>
              Visitar proyecto →
            </a>
          )}
        </article>
      ))}
    </div>

    <section class="rounded-2xl border border-accent/30 bg-accent/5 p-6">
      <h2 class="text-2xl font-semibold text-white">Tecnologías y patrones</h2>
      <div class="mt-4 space-y-4 text-slate-200">
        <p>
          A través de estos proyectos, he entregado consistentemente soluciones empresariales usando:
        </p>
        <ul class="list-disc space-y-2 pl-6">
          <li><strong>Frontend:</strong> React, TypeScript, Next.js, Gatsby, Material UI, Tailwind CSS, Styled Components</li>
          <li><strong>Gestión de estado:</strong> Redux, Zustand, React Query, Context API</li>
          <li><strong>Formularios y validación:</strong> Formik, React Hook Form, Yup</li>
          <li><strong>Integración backend:</strong> REST APIs, GraphQL, Java, PHP, Node.js</li>
          <li><strong>Bases de datos:</strong> PostgreSQL, MongoDB, MySQL</li>
          <li><strong>DevOps y testing:</strong> Docker, GitHub Actions, Playwright, Jest, Cypress</li>
        </ul>
        <p class="pt-4">
          Cada proyecto sigue patrones de arquitectura empresarial con énfasis en mantenibilidad, escalabilidad, seguridad y colaboración en equipo.
        </p>
      </div>
    </section>

    <section class="rounded-2xl border border-accent/30 bg-accent/5 p-6 text-center">
      <h2 class="text-2xl font-semibold text-white">Inicia tu próximo proyecto empresarial</h2>
      <p class="mt-3 text-slate-200">
        Aporto 8+ años de experiencia en desarrollo React empresarial para construir portales internos escalables y aplicaciones críticas. Hablemos de tu proyecto.
      </p>
      <a href="mailto:marekdolnicek@gmail.com" class="mt-4 inline-block rounded-full bg-accent px-8 py-3 font-semibold text-ink transition hover:bg-accentMuted">
        Contáctame
      </a>
    </section>
  </article>

  <script type="application/ld+json" set:html={JSON.stringify({
    "@context": "https://schema.org",
    "@type": "ItemList",
    "name": "Proyectos React empresariales de Marek Dolníček",
    "description": "Portafolio de aplicaciones React empresariales y portales internos",
    "numberOfItems": projects.length,
    "itemListElement": projects.map((project, index) => ({
      "@type": "CreativeWork",
      "position": index + 1,
      "name": project.data.title,
      "description": project.data.summary,
      "author": {
        "@type": "Person",
        "name": "Marek Dolníček"
      }
    }))
  })}></script>
</BaseLayout>
